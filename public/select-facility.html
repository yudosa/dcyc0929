<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ìš©ì‹œì„¤ ì„ íƒ - í¥ë•ì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="firebase-config.js"></script>
</head>
<body>
    <div class="container vertical-layout">
        <!-- ìƒë‹¨ ë°°ë„ˆ ì„¹ì…˜ -->
        <div class="banner-section">
            <div class="current-datetime"></div>
            <div class="banner-image">
                <div class="image-slider">
                    <img src="dc1.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img active">
                    <img src="dc2.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                    <img src="dc3.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                    <img src="dc4.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                    <img src="dc5.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                    <img src="dc6.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                    <img src="dc7.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                    <img src="dc8.jpg" alt="ë™ì²œì²­ì†Œë…„ ë¬¸í™”ì˜ì§‘ ê±´ë¬¼" class="main-building-img">
                </div>
                </div>
                <div class="slider-dots">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </div>
            <main class="rental-main">
                <div class="facility-floor-row">
                    <div class="facility-floor-card">
                        <div class="facility-card-row facility-card-row-multi">
                            <div class="facility-card facility-card-nintendo">
                                <div class="facility-emoji">ğŸ®</div>
                                <div class="facility-name">ë‹Œí…ë„</div>
                            </div>
                            <div class="facility-card facility-card-ps">
                                <div class="facility-emoji">ğŸ•¹ï¸</div>
                                <div class="facility-name">í”Œë ˆì´<br>ìŠ¤í…Œì´ì…˜</div>
                            </div>
                        </div>
                        <div class="facility-card-row facility-card-row-single">
                            <div class="facility-card facility-card-karaoke">
                                <div class="facility-emoji">ğŸ¤</div>
                                <div class="facility-name">ë…¸ë˜ë°©</div>
                            </div>
                        </div>
                        <div class="facility-card-row facility-card-row-single">
                            <div class="facility-card facility-card-computer">
                                <div class="facility-emoji">ğŸ’»</div>
                                <div class="facility-name">ì»´í“¨í„°</div>
                            </div>
                        </div>
                        <div class="facility-card-row facility-card-row-multi">
                            <div class="facility-card facility-card-reading">
                                <div class="facility-emoji">ğŸ“š</div>
                                <div class="facility-name">ë¶ ì¹´í˜</div>
                            </div>
                            <div class="facility-card facility-card-boardgame">
                                <div class="facility-emoji">ğŸ²</div>
                                <div class="facility-name">ë³´ë“œê²Œì„</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-actions-centered" style="display:flex; flex-direction:row; gap:8px;">
                    <button class="btn-secondary-centered facility-back-btn" onclick="window.location.href='index.html'">â—€ ì´ì „</button>
                    <button class="btn-secondary-centered facility-home-btn" onclick="sessionStorage.removeItem('agreedPersonalInfo'); window.location.href='index.html'">â†» ì²˜ìŒìœ¼ë¡œ</button>
                </div>
            </main>
    </div>



    <script>
    // ì‹œì„¤ ì¹´ë“œ í´ë¦­ ì‹œ ì‹œì„¤ëª… ì €ì¥ (ë¶ ì¹´í˜ì™€ ë³´ë“œê²Œì„ í¬í•¨)
    document.querySelectorAll('.facility-card').forEach(card => {
        card.addEventListener('click', function() {
            let name = card.querySelector('.facility-name').textContent.trim().replace(/\s+/g, ' ');
            // í”Œë ˆì´ìŠ¤í…Œì´ì…˜ í…ìŠ¤íŠ¸ ì •ê·œí™”
            if (name.includes('í”Œë ˆì´') && name.includes('ìŠ¤í…Œì´ì…˜')) {
                name = 'í”Œë ˆì´ìŠ¤í…Œì´ì…˜';
            }
            console.log('ì„ íƒëœ ì‹œì„¤:', name);
            
            // ë¶ ì¹´í˜ì™€ ë³´ë“œê²Œì„ì€ ë°”ë¡œ ì˜ˆì•½ ì™„ë£Œ ì²˜ë¦¬
            if (name === 'ë¶ ì¹´í˜' || name === 'ë³´ë“œê²Œì„') {
                sessionStorage.setItem('selectedFacility', name);
                sessionStorage.setItem('selectedDetail', '-');
                sessionStorage.setItem('instantReservation', 'true'); // ì¦‰ì‹œ ì˜ˆì•½ í”Œë˜ê·¸
                createInstantReservation(name);
            } else {
                sessionStorage.setItem('selectedFacility', name);
                window.location.href = 'reservation-date.html';
            }
        });
    });

    // ì¦‰ì‹œ ì˜ˆì•½ ìƒì„± í•¨ìˆ˜ (ë¶ ì¹´í˜, ë³´ë“œê²Œì„ìš©) - ì‹¤ì‹œê°„ ì¤‘ë³µ ì²´í¬ í¬í•¨
    window.createInstantReservation = async function(facilityName) {
        const userName = localStorage.getItem('userName') || 'ê³ ê°';
        const userPhone = localStorage.getItem('userPhone') || '';
        const userGender = localStorage.getItem('userGender') || '';
        const userAge = localStorage.getItem('userAge') || '';
        
        const reservationData = {
            name: userName,
            phone: userPhone || undefined,
            gender: userGender || undefined,
            age: userAge || undefined,
            facility: facilityName,
            detail: '-',
            date: new Date().toISOString().split('T')[0], // ì˜¤ëŠ˜ ë‚ ì§œ
            start_time: '00:00',
            end_time: '00:01',
            purpose: '',
            agreedPersonalInfo: sessionStorage.getItem('agreedPersonalInfo') === 'y' ? 'ë™ì˜' : 'ë¯¸ë™ì˜'
        };
        
        try {
            // ì˜ˆì•½ ìš”ì²­ ì „ ìµœì‹  ë°ì´í„°ë¡œ í•œ ë²ˆ ë” ì¤‘ë³µ ì²´í¬
            console.log('ì¦‰ì‹œ ì˜ˆì•½ ì „ ìµœì¢… ì¤‘ë³µ ì²´í¬ ì‹œì‘...');
            const dateCheckResponse = await fetch(`/api/reservations/date/${reservationData.date}`);
            if (dateCheckResponse.ok) {
                const latestReservations = await dateCheckResponse.json();
                const conflictingReservation = latestReservations.find(reservation => {
                    if (reservation.status !== 'active') return false;
                    if (reservation.facility !== reservationData.facility || reservation.detail !== reservationData.detail) {
                        return false;
                    }
                    // ì¦‰ì‹œ ì˜ˆì•½ì˜ ê²½ìš° ê°™ì€ ì‹œì„¤ì˜ í™œì„± ì˜ˆì•½ì´ ìˆëŠ”ì§€ë§Œ ì²´í¬
                    return true;
                });
                
                if (conflictingReservation) {
                    console.log('ìµœì¢… ì²´í¬ì—ì„œ ì¤‘ë³µ ì˜ˆì•½ ë°œê²¬:', conflictingReservation);
                    showModal('ì£„ì†¡í•©ë‹ˆë‹¤. ë°©ê¸ˆ ë‹¤ë¥¸ ë¶„ì´ í•´ë‹¹ ì‹œì„¤ì„ ì˜ˆì•½í•˜ì…¨ìŠµë‹ˆë‹¤.\nì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
                    return;
                }
            }
            
            console.log('ì¦‰ì‹œ ì˜ˆì•½ ë°ì´í„° ì „ì†¡:', reservationData);
            const response = await fetch('/api/reservations', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(reservationData)
            });
            
            if (response.ok) {
                const result = await response.json();
                // localStorageì— ì˜ˆì•½ ì •ë³´ ì €ì¥ (ì˜ˆì•½ ì™„ë£Œ í˜ì´ì§€ì—ì„œ ì‚¬ìš©)
                localStorage.setItem('reservationFacility', reservationData.facility);
                localStorage.setItem('reservationDetail', reservationData.detail);
                localStorage.setItem('reservationDate', reservationData.date);
                localStorage.setItem('reservationTime', reservationData.start_time);
                localStorage.setItem('reservationId', result.id);
                
                // ì˜ˆì•½ ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™
                sessionStorage.setItem('reservationComplete', 'true');
                sessionStorage.setItem('reservationData', JSON.stringify(reservationData));
                window.location.href = 'reservation-complete.html';
            } else {
                const errorData = await response.json().catch(() => ({}));
                let errorMessage = errorData.error || `ì˜ˆì•½ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ (${response.status})`;
                
                // ì¤‘ë³µ ì˜ˆì•½ ì—ëŸ¬ì˜ ê²½ìš° ë” ì¹œí™”ì ì¸ ë©”ì‹œì§€ í‘œì‹œ
                if (errorMessage.includes('í•´ë‹¹ ì‹œê°„ì— ì´ë¯¸ ì˜ˆì•½ì´ ìˆìŠµë‹ˆë‹¤')) {
                    errorMessage = 'ì£„ì†¡í•©ë‹ˆë‹¤. ë°©ê¸ˆ ë‹¤ë¥¸ ë¶„ì´ í•´ë‹¹ ì‹œì„¤ì„ ì˜ˆì•½í•˜ì…¨ìŠµë‹ˆë‹¤.\nì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
                }
                
                console.error('ì„œë²„ ì˜¤ë¥˜:', errorData);
                showModal(errorMessage);
            }
        } catch (error) {
            console.error('ì˜ˆì•½ ìƒì„± ì˜¤ë¥˜:', error);
            showModal('ì˜ˆì•½ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    };

    window.showModal = function(message) {
        let modal = document.createElement('div');
        modal.className = 'custom-modal-bg';
        modal.innerHTML = `
            <div class="custom-modal">
                <div class="custom-modal-content">${message}</div>
                <button class="custom-modal-btn">í™•ì¸</button>
            </div>
        `;
        document.body.appendChild(modal);
        modal.querySelector('.custom-modal-btn').onclick = () => modal.remove();
    };

    window.addEventListener('DOMContentLoaded', function() {
        if (sessionStorage.getItem('agreedPersonalInfo') !== 'y') {
            alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•´ì•¼ ì˜ˆì•½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
            window.location.href = 'rental.html';
        }
        
        // ë²„íŠ¼ ì´ë²¤íŠ¸ ëª…ì‹œì  ë°”ì¸ë”©
        const backBtn = document.querySelector('.facility-back-btn');
        const homeBtn = document.querySelector('.facility-home-btn');
        
        if (backBtn) {
            backBtn.addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'index.html';
            });
        }
        
        if (homeBtn) {
            homeBtn.addEventListener('click', function(e) {
                e.preventDefault();
                sessionStorage.removeItem('agreedPersonalInfo');
                window.location.href = 'index.html';
            });
        }
    });
    </script>
    
    <script>
    // ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” ê¸°ëŠ¥
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.image-slider .main-building-img');
    const dots = document.querySelectorAll('.dot');

    function showSlide(index) {
        // ëª¨ë“  ìŠ¬ë¼ì´ë“œ ìˆ¨ê¸°ê¸°
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        
        // í˜„ì¬ ìŠ¬ë¼ì´ë“œ ë³´ì´ê¸°
        slides[index].classList.add('active');
        dots[index].classList.add('active');
    }

    function nextSlide() {
        currentSlideIndex = (currentSlideIndex + 1) % slides.length;
        showSlide(currentSlideIndex);
    }

    // ë„íŠ¸ í´ë¦­ ì´ë²¤íŠ¸
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            currentSlideIndex = index;
            showSlide(currentSlideIndex);
        });
    });

    // ìë™ ìŠ¬ë¼ì´ë“œ (3ì´ˆë§ˆë‹¤)
    setInterval(nextSlide, 3000);

    // ì´ˆê¸° ìŠ¬ë¼ì´ë“œ ì„¤ì •
    showSlide(0);
    
    // í˜„ì¬ ì‹œê°„/ë‚ ì§œ í‘œì‹œ - ë””ì§€í„¸ ì‹œê³„ ìŠ¤íƒ€ì¼
    function updateDateTime() {
        const now = new Date();
        const y = now.getFullYear();
        const m = String(now.getMonth()+1).padStart(2,'0');
        const d = String(now.getDate()).padStart(2,'0');
        const h = String(now.getHours()).padStart(2,'0');
        const min = String(now.getMinutes()).padStart(2,'0');
        const s = String(now.getSeconds()).padStart(2,'0');
        
        // ìš”ì¼ ë°°ì—´
        const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
        const weekday = weekdays[now.getDay()];
        
        // ë””ì§€í„¸ ì‹œê³„ ìŠ¤íƒ€ì¼ë¡œ í‘œì‹œ
        document.querySelector('.current-datetime').innerHTML = 
            `<div style="font-size: 1rem; margin-bottom: 2px; opacity: 0.9;">${y}-${m}-${d} (${weekday})</div>
             <div style="font-size: 1.5rem; font-weight: 800;">${h}:${min}:${s}</div>`;
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();

    
    // ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜
    window.initProgramSlider = function() {
        console.log('í”„ë¡œê·¸ë¨ ìŠ¬ë¼ì´ë” ì´ˆê¸°í™” ì‹œì‘');
        
        // ìš”ì†Œ ì°¾ê¸°
        const sliderTrack = document.getElementById('programSliderTrack');
        const sliderDots = document.getElementById('programSliderDots');
        
        if (!sliderTrack) {
            console.error('programSliderTrack ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            return;
        }
        if (!sliderDots) {
            console.error('programSliderDots ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            return;
        }
        
        console.log('í”„ë¡œê·¸ë¨ ìŠ¬ë¼ì´ë” ìš”ì†Œ ì°¾ìŒ');

        // ìƒ˜í”Œ í”„ë¡œê·¸ë¨ ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ)
        const programs = [
            {
                title: "ìˆ˜ì§€ì²­ì†Œë…„ë¬¸í™”ì˜ì§‘ 'ìˆ˜ì§€ë§ì€ ë² ì´í‚¹êµì‹¤ 4ì°¨' í™œë™",
                image: "program1.jpg",
                applicationPeriod: "2025-07-23 ~ 2025-08-01",
                participationPeriod: "2025-08-02 ~ 2025-08-30",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ìˆ˜ì§€ì²­ì†Œë…„ë¬¸í™”ì˜ì§‘ 'ìˆ˜ì§€ë§ì€ ë² ì´í‚¹êµì‹¤ 3ì°¨' í™œë™",
                image: "program2.jpg",
                applicationPeriod: "2025-06-19 ~ 2025-07-04",
                participationPeriod: "2025-07-05 ~ 2025-07-26",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ìœ ë¦¼ì²­ì†Œë…„ë¬¸í™”ì˜ì§‘ ì²­ì†Œë…„ì´ ë°°ìš°ëŠ” ì—­ì‚¬ì˜ ì§„ì‹¤ 'ì²­.ì‚¬.ì§„' í™œë™ê³µìœ ",
                image: "program3.jpg",
                applicationPeriod: "2025-08-30 ~ 2025-09-13",
                participationPeriod: "2025-08-30 ~ 2025-09-13",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ì²˜ì¸ì„±ì–´ìš¸ë¦¼ì„¼í„° ì•„íŠ¸ì‚´ë¡± 1íšŒì°¨ í™œë™",
                image: "program4.jpg",
                applicationPeriod: "2025-08-12 ~ 2025-08-19",
                participationPeriod: "2025-09-06 ~ 2025-09-06",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ë™ì²œì²­ì†Œë…„ë¬¸í™”ì˜ì§‘ ê°œê´€ì‹ ì‚¬ì „ì ‘ìˆ˜",
                image: "program5.jpg",
                applicationPeriod: "2025-09-04 ~ 2025-09-24",
                participationPeriod: "2025-09-29 ~ 2025-09-29",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ë™ì²œì²­ì†Œë…„ë¬¸í™”ì˜ì§‘ 'ì²­ì†Œë…„ ìš´ì˜ìœ„ì›íšŒ 1ê¸° ëª¨ì§‘'",
                image: "program6.jpg",
                applicationPeriod: "2025-09-09 ~ 2025-09-17",
                participationPeriod: "2025-10-01 ~ 2025-12-31",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ì²­ì†Œë…„ìˆ˜ë ¨ê´€ ìš•êµ¬ì¡°ì‚¬ ê²°ê³¼ ê³µìœ ",
                image: "program7.jpg",
                applicationPeriod: "2025-08-08 ~ 2025-09-25",
                participationPeriod: "2025-08-08 ~ 2025-09-25",
                link: "https://www.yiyf.or.kr"
            },
            {
                title: "ê³µë“œë¦¼ 2025ë…„ ë‚˜+ë„ˆ=ë“œë¦¼ ë©˜í†  ëª¨ì§‘ ì•ˆë‚´",
                image: "program8.jpg",
                applicationPeriod: "2025-08-08 ~",
                participationPeriod: "ìƒì‹œ",
                link: "https://www.yiyf.or.kr"
            }
        ];

        let currentProgramIndex = 0;

        // í”„ë¡œê·¸ë¨ ì¹´ë“œ HTML ìƒì„±
        function createProgramCard(program, index) {
            return `
                <div class="program-card ${index === 0 ? 'active' : ''}" data-index="${index}">
                    <div class="program-image">
                        <img src="${program.image}" alt="${program.title}" onerror="this.src='default-program.jpg'">
                    </div>
                    <div class="program-content">
                        <h4 class="program-title">${program.title}</h4>
                        <div class="program-periods">
                            <div class="period-item">
                                <span class="period-label">ì‹ ì²­ê¸°ê°„</span>
                                <span class="period-value">${program.applicationPeriod}</span>
                            </div>
                            <div class="period-item">
                                <span class="period-label">ì°¸ì—¬ê¸°ê°„</span>
                                <span class="period-value">${program.participationPeriod}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ìŠ¬ë¼ì´ë” HTML ìƒì„±
        sliderTrack.innerHTML = programs.map((program, index) => createProgramCard(program, index)).join('');
        
        // ë„íŠ¸ ìƒì„±
        sliderDots.innerHTML = programs.map((_, index) => 
            `<span class="program-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></span>`
        ).join('');

        // ìŠ¬ë¼ì´ë“œ í‘œì‹œ í•¨ìˆ˜
        function showProgramSlide(index) {
            const cards = sliderTrack.querySelectorAll('.program-card');
            const dots = sliderDots.querySelectorAll('.program-dot');
            
            cards.forEach(card => card.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            if (cards[index]) cards[index].classList.add('active');
            if (dots[index]) dots[index].classList.add('active');
            
            currentProgramIndex = index;
        }

        // ë‹¤ìŒ ìŠ¬ë¼ì´ë“œ í•¨ìˆ˜
        function nextProgramSlide() {
            const nextIndex = (currentProgramIndex + 1) % programs.length;
            showProgramSlide(nextIndex);
        }

        // ë„íŠ¸ í´ë¦­ ì´ë²¤íŠ¸
        sliderDots.addEventListener('click', function(e) {
            if (e.target.classList.contains('program-dot')) {
                const index = parseInt(e.target.getAttribute('data-index'));
                showProgramSlide(index);
            }
        });

        // ìë™ ìŠ¬ë¼ì´ë“œ (5ì´ˆë§ˆë‹¤)
        setInterval(nextProgramSlide, 5000);

        // ì´ˆê¸° ìŠ¬ë¼ì´ë“œ ì„¤ì •
        showProgramSlide(0);
        console.log('í”„ë¡œê·¸ë¨ ìŠ¬ë¼ì´ë” ì´ˆê¸°í™” ì™„ë£Œ');
    }

    // APIì—ì„œ í”„ë¡œê·¸ë¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ìŠ¬ë¼ì´ë” ì´ˆê¸°í™”
    async function initSimpleProgramSlider() {
        try {
            console.log('í”„ë¡œê·¸ë¨ ë°ì´í„° ë¡œë”© ì‹œì‘...');
            const response = await fetch('/api/programs');
            const programs = await response.json();
            
            console.log('í”„ë¡œê·¸ë¨ ë°ì´í„° ë¡œë”© ì™„ë£Œ:', programs.length, 'ê°œ');
            
            const sliderTrack = document.getElementById('programSliderTrack');
            const sliderDots = document.getElementById('programSliderDots');
            
            if (!sliderTrack || !sliderDots) {
                console.error('ìŠ¬ë¼ì´ë” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            // í”„ë¡œê·¸ë¨ ì¹´ë“œ HTML ìƒì„±
            const cardsHTML = programs.map((program, index) => `
                <div class="program-card ${index === 0 ? 'active' : ''}">
                    <div class="program-image">
                        <img src="${program.image}" alt="${program.title}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg=='">
                    </div>
                    <div class="program-content">
                        <h4 class="program-title">${program.title}</h4>
                        <div class="program-periods">
                            <div class="period-item">
                                <span class="period-label">ì‹ ì²­ê¸°ê°„</span>
                                <span class="period-value">${program.applicationPeriod}</span>
                            </div>
                            <div class="period-item">
                                <span class="period-label">ì°¸ì—¬ê¸°ê°„</span>
                                <span class="period-value">${program.participationPeriod}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // ë„íŠ¸ HTML ìƒì„±
            const dotsHTML = programs.map((_, index) => 
                `<span class="program-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></span>`
            ).join('');
            
            // HTML ì—…ë°ì´íŠ¸
            sliderTrack.innerHTML = cardsHTML;
            sliderDots.innerHTML = dotsHTML;
            
            // ìŠ¬ë¼ì´ë” ê¸°ëŠ¥ ì´ˆê¸°í™”
            const cards = document.querySelectorAll('.program-card');
            const dots = document.querySelectorAll('.program-dot');
            let currentIndex = 0;

            function showSlide(index) {
                cards.forEach(card => card.classList.remove('active'));
                dots.forEach(dot => dot.classList.remove('active'));
                
                if (cards[index]) cards[index].classList.add('active');
                if (dots[index]) dots[index].classList.add('active');
                
                currentIndex = index;
            }

            function nextSlide() {
                const nextIndex = (currentIndex + 1) % cards.length;
                showSlide(nextIndex);
            }

            // ë„íŠ¸ í´ë¦­ ì´ë²¤íŠ¸
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => showSlide(index));
            });

            // ìë™ ìŠ¬ë¼ì´ë“œ (5ì´ˆë§ˆë‹¤)
            setInterval(nextSlide, 5000);
            
            console.log('í”„ë¡œê·¸ë¨ ìŠ¬ë¼ì´ë” ì´ˆê¸°í™” ì™„ë£Œ');
            
        } catch (error) {
            console.error('í”„ë¡œê·¸ë¨ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
            // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ HTML ìœ ì§€
        }
    }

    // í˜ì´ì§€ ë¡œë“œ í›„ ìŠ¬ë¼ì´ë”ë“¤ ì‹œì‘
    document.addEventListener('DOMContentLoaded', function() {
        initSimpleProgramSlider();
    });
    </script>
    <style>
    .form-actions-centered {
        display: flex !important;
        flex-direction: row !important;
        gap: 8px !important;
    }
    .rental-main {
        margin-top: 40px !important;
        max-width: 100% !important;
        padding: 0 !important;
        width: 100% !important;
    }
    .facility-floor-row {
        gap: 30px !important;
        max-width: 100% !important;
        width: 100% !important;
        padding: 0 !important;
    }
    .facility-floor-card {
        margin-bottom: 20px !important;
        max-width: 100% !important;
        width: 100% !important;
        padding: 24px !important;
    }
    .facility-card-other {
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%) !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        pointer-events: auto !important;
        position: relative !important;
        z-index: 10 !important;
        user-select: none !important;
        flex: 1 1 0 !important;
        min-width: 110px !important;
        max-width: 140px !important;
    }
    
    #autonomousCard {
        cursor: pointer !important;
        pointer-events: auto !important;
    }
    
    /* ì‹œê³„ ìŠ¤íƒ€ì¼ */
    .current-datetime {
        position: absolute;
        top: 16px;
        right: 18px;
        font-size: 1.32rem;
        font-weight: 700;
        color: #444;
        margin: 0;
        letter-spacing: 1px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: rgba(255,255,255,0.85);
        padding: 2px 10px;
        border-radius: 8px;
    }
    @media (max-width: 600px) {
        .current-datetime {
            text-align: center;
            margin-right: 0;
        }
    }
    .facility-card-other:hover {
        transform: translateY(-4px) scale(1.04) !important;
        box-shadow: 0 8px 24px rgba(255, 154, 158, 0.3) !important;
    }
    .form-actions-centered button {
        padding: 20px 50px !important;
        font-size: 1.3rem !important;
        min-width: 200px !important;
        white-space: nowrap !important;
        flex: 1 !important;
    }
    
    /* ììœ¨ì´ìš© ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .custom-modal-bg {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        background: rgba(0, 0, 0, 0.5) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        z-index: 9999 !important;
    }
    
    .custom-modal {
        background: white !important;
        border-radius: 20px !important;
        padding: 30px !important;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
        max-width: 90vw !important;
        width: 100% !important;
    }
    
    .custom-modal-btn {
        background: linear-gradient(90deg, #a8edea 0%, #fed6e3 100%) !important;
        color: #222 !important;
        border: none !important;
        border-radius: 12px !important;
        padding: 12px 24px !important;
        font-weight: 700 !important;
        cursor: pointer !important;
        width: 100% !important;
        margin-top: 10px !important;
    }



    /* í”„ë¡œê·¸ë¨ ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
    .program-slider-section {
        margin: 30px 0;
        padding: 20px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .program-slider-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .program-slider-header h3 {
        color: #2c3e50;
        font-size: 1.3rem;
        font-weight: 700;
        margin: 0;
    }

    .more-link {
        color: #3498db;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9rem;
        padding: 8px 16px;
        border: 2px solid #3498db;
        border-radius: 20px;
        transition: all 0.3s ease;
    }

    .more-link:hover {
        background: #3498db;
        color: white;
        transform: translateY(-2px);
    }

    .program-slider-container {
        position: relative;
        overflow: hidden;
        border-radius: 15px;
        background: white;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .program-slider-track {
        display: flex;
        transition: transform 0.5s ease-in-out;
    }

    .program-card {
        min-width: 100%;
        display: none;
        padding: 20px;
        background: white;
    }

    .program-card.active {
        display: block;
    }

    .program-image {
        width: 100%;
        height: 200px;
        margin-bottom: 15px;
        border-radius: 10px;
        overflow: hidden;
        background: #f8f9fa;
    }

    .program-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
    }

    .program-content {
        padding: 0 10px;
    }

    .program-title {
        font-size: 1.1rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 15px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .program-periods {
        margin-bottom: 15px;
    }

    .period-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        padding: 8px 0;
        border-bottom: 1px solid #eee;
    }

    .period-item:last-child {
        border-bottom: none;
    }

    .period-label {
        font-size: 0.9rem;
        color: #666;
        font-weight: 600;
    }

    .period-value {
        font-size: 0.9rem;
        color: #3498db;
        font-weight: 700;
    }


    .program-slider-dots {
        display: flex;
        justify-content: center;
        gap: 8px;
        padding: 15px 0;
        background: #f8f9fa;
    }

    .program-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: rgba(52, 152, 219, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .program-dot.active {
        background-color: #3498db;
        transform: scale(1.2);
    }

    .program-dot:hover {
        background-color: #3498db;
        transform: scale(1.1);
    }

    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 768px) {
    }
    
    @media (max-width: 480px) {

        /* í”„ë¡œê·¸ë¨ ìŠ¬ë¼ì´ë” ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ */
        .program-slider-section {
            margin: 20px 0;
            padding: 15px;
        }

        .program-slider-header {
            flex-direction: column;
            gap: 10px;
            text-align: center;
        }

        .program-slider-header h3 {
            font-size: 1.1rem;
        }

        .more-link {
            font-size: 0.8rem;
            padding: 6px 12px;
        }

        .program-card {
            padding: 15px;
        }

        .program-image {
            height: 150px;
        }

        .program-title {
            font-size: 1rem;
        }

        .period-label, .period-value {
            font-size: 0.8rem;
        }

    }
    </style>
    
</body>
</html> 